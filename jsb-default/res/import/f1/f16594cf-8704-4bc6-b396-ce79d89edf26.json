{"__type__":"cc.TextAsset","_name":"rummy_proto.d","text":"/// <reference types=\"rummy\" />\n\nexport namespace rummy {\n\t/**\n\t * 消息后缀为ST，表示一种状态；为EV表示用户触发的某种事件；为NT表示服务端生成的通知\n\t */\n\t/**\n\t * 消息后缀为Req，表示客户端向服务端发送的请求\n\t */\n\t/**\n\t * ---------------------------基础结构----------------------------\n\t */\n\t/**\n\t * 牌组的牌型\n\t */\n\t/**\n\t * 参考旧游戏的设计\n\t */\n\t/**\n\t * wait-->prepare: 状态凑人数, 人数凑齐后立即进入prepare状态\n\t */\n\t/**\n\t * prepare-->play: 再过3秒会重新检查人数，少于最小人数2，取消prepare状态, 回到wait状态;否则进入play\n\t */\n\t/**\n\t * play-->settle: 场上只剩下一名玩家时3秒钟之后进入结算状态，游戏结束\n\t */\n\t/**\n\t * settle-->wait: 结算完毕后, 自动进入wait状态, (此处应该再检查人数)5秒钟后进入prepare状态\n\t */\n\t/**\n\t * 牌组，一副牌1~14个牌组\n\t */\n\texport interface RummyCardGroupModel {\n\t\t/**\n\t\t * 与上面的枚举对应\n\t\t */\n\t\tPattern:RummyPATTERNModel;\n\t\tCardS:number[];\n\t}\n\n\t/**\n\t * 手牌信息\n\t */\n\texport interface RummyHandCardModel {\n\t\tCardGroupS:RummyCardGroupModel[];\n\t\t/**\n\t\t * 分数\n\t\t */\n\t\tScore:number;\n\t\t/**\n\t\t * 手牌有多少张\n\t\t */\n\t\tCardCnt:number;\n\t\t/**\n\t\t * -1:不能胡牌, 14:直接可以胡牌, 0 ~ 13:表示胡牌要出的牌组的索引\n\t\t */\n\t\tDeclareType:number;\n\t}\n\n\t/**\n\t * 桌牌信息\n\t */\n\texport interface RummyTableCardModel {\n\t\t/**\n\t\t * 万能牌值\n\t\t */\n\t\tWildCard:number;\n\t\t/**\n\t\t * 万能牌的rank\n\t\t */\n\t\tWildRank:number;\n\t\t/**\n\t\t * 暗牌牌池剩余牌数量\n\t\t */\n\t\tPoolCnt:number;\n\t\t/**\n\t\t * 明牌牌池可见牌\n\t\t */\n\t\tVisibleCard:number;\n\t\t/**\n\t\t * finish solt可见的牌\n\t\t */\n\t\tFinishCard:number;\n\t}\n\n\t/**\n\t * 用户的结算信息\n\t */\n\texport interface RummyChairSettleModel {\n\t\t/**\n\t\t * user id\n\t\t */\n\t\tUserID:number;\n\t\t/**\n\t\t * 手牌,直接使用手牌的分数,不在单独增加分数的消息,\n\t\t */\n\t\tHandCard:RummyHandCardModel;\n\t\t/**\n\t\t * 用户状态 0:准备  1:游戏中  2:赢家  3:输家  4:弃牌\n\t\t */\n\t\tStatus:number;\n\t\t/**\n\t\t * 赢钱金额 >0:赢家,目前设计只有一个赢家  <0:输家\n\t\t */\n\t\tWinAmount:number;\n\t\t/**\n\t\t * 用户名\n\t\t */\n\t\tUserName:string;\n\t\t/**\n\t\t * 头像\n\t\t */\n\t\tAvatar:string;\n\t}\n\n\t/**\n\t * 房间的结算信息\n\t */\n\texport interface RummySettleModel {\n\t\t/**\n\t\t * 结算原因, 0:未结算  1:胡牌结算  2:流局结算  3:玩家弃牌,人数不足结算\n\t\t */\n\t\tReason:number;\n\t\t/**\n\t\t * 万能牌rank\n\t\t */\n\t\tWildRank:number;\n\t\t/**\n\t\t * 结算信息, UserS会随着玩家的变化变化,但SettleS只会保存参与游戏的信息\n\t\t */\n\t\tChairS:{[key: number]: RummyChairSettleModel; };\n\t}\n\n\t/**\n\t * ----------------------------客户端请求--------------------------\n\t */\n\t/**\n\t * 用户认证，id:1，用户认证后自动进入准备状态\n\t */\n\texport interface RummyAuthReqModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * \n\t\t */\n\t\tUserID:number;\n\t\t/**\n\t\t * \n\t\t */\n\t\tToken:string;\n\t\t/**\n\t\t * 房间号\n\t\t */\n\t\tRoomKind:number;\n\t\t/**\n\t\t * 客户端版本，现在传0就行\n\t\t */\n\t\tVersion:number;\n\t\t/**\n\t\t * 如果用户是点击返回游戏进来的，会将上一局游戏结果(108)推送过去，然后用户要点击继续游戏才会变成准备状态\n\t\t */\n\t\tIsReconnect:boolean;\n\t\t/**\n\t\t * 客户端上传ip\n\t\t */\n\t\tIP:string;\n\t}\n\n\t/**\n\t * 用户离开房间，id:2\n\t */\n\texport interface RummyUserOutReqModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * \n\t\t */\n\t\tChairNo:number;\n\t}\n\n\t/**\n\t * 用户请求更换牌桌, id:3\n\t */\n\texport interface RummyChangeTableReqModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t}\n\n\t/**\n\t * 用户请求弃牌, id:4\n\t */\n\texport interface RummyDropReqModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t}\n\n\t/**\n\t * 用户摸牌, id:5\n\t */\n\texport interface RummyTouchReqModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * 是否从明牌摸\n\t\t */\n\t\tVisible:boolean;\n\t}\n\n\t/**\n\t * 用户出牌, id:6\n\t */\n\texport interface RummyDiscardReqModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * 所出牌的牌值\n\t\t */\n\t\tCard:number;\n\t\t/**\n\t\t * 所出的牌在HardCard的Group索引\n\t\t */\n\t\tGroupIndex:number;\n\t\t/**\n\t\t * 所出的牌在CardGroup的Card索引\n\t\t */\n\t\tCardIndex:number;\n\n\t\t/**\n\t\t * 是不是finish 的出牌\n\t\t */\n\t\tIsDeclare:boolean;\n\t}\n\n\t/**\n\t * 用户理牌, id:7\n\t */\n\texport interface RummyGroupReqModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * 理牌后的手牌\n\t\t */\n\t\tHandCard:RummyHandCardModel;\n\t}\n\n\n\texport interface RummyDeclareConfirmReqModel{\n\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t /**\n\t\t  * Confirm 是否胡牌\n\t\t  */\n\t\t Confirm:number;\n\t}\n\n\t/**\n\t * 用户胡牌, id:10\n\t */\n\texport interface RummyDeclareReqModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\n\t\t/**\n\t\t * 所出的牌在HardCard的Group索引\n\t\t */\n\t\tGroupIndex:number;\n\t\t/**\n\t\t * 所出的牌在CardGroup的Card索引\n\t\t */\n\t\tCardIndex:number;\n\t}\n\n\t/**\n\t * 同步用户手牌, id:11;返回用户的状态数据(101)\n\t */\n\texport interface RummySyncUserReqModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t}\n\n\t/**\n\t * 更新防超时弃牌开关状态, id:12;\n\t */\n\texport interface RummyAntiTimeoutReqModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * true:打开, false:关闭\n\t\t */\n\t\tSwitch:boolean;\n\t}\n\n\t/**\n\t * 请求上一局的结算信息, id:13;\n\t */\n\texport interface RummyLastSettleReqModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t}\n\n\t/**\n\t * --------------------------服务端推送------------------------------\n\t */\n\t/**\n\t * 用户状态，id=101\n\t */\n\texport interface RummyUserSTModel {\n\t\t/**\n\t\t * 用户id\n\t\t */\n\t\tID:number;\n\t\t/**\n\t\t * 用户名\n\t\t */\n\t\tUserName:string;\n\t\t/**\n\t\t * 用户余额\n\t\t */\n\t\tCredit:number;\n\t\t/**\n\t\t * 头像\n\t\t */\n\t\tAvatar:string;\n\t\t/**\n\t\t * 性别\n\t\t */\n\t\tGender:boolean;\n\t\t/**\n\t\t * 用户状态 0:准备  1:游戏中  2:赢家  3:输家  4:弃牌\n\t\t */\n\t\tStatus:number;\n\t\t/**\n\t\t * 房间id\n\t\t */\n\t\tRoomID:number;\n\t\t/**\n\t\t * 0:尚未分配座位，1-5，座位编号\n\t\t */\n\t\tChair:number;\n\t\t/**\n\t\t * 手牌\n\t\t */\n\t\tHandCard:RummyHandCardModel;\n\t\t/**\n\t\t * 摸牌计数,目前的用法是,在不同阶段弃牌,如还没有摸牌和已经摸过牌, 扣的金额不一样\n\t\t */\n\t\tTouchCnt:number;\n\t\t/**\n\t\t * 用户如果drop, 需要扣掉多少金币\n\t\t */\n\t\tDropAmount:number;\n\t\t/**\n\t\t * 用户最后活跃时间\n\t\t */\n\t\tLastActiveAt:number;\n\t\t/**\n\t\t * 用户实际连接的服务器\n\t\t */\n\t\tServerAddr:string;\n\t\t/**\n\t\t * 未落库的金币数\n\t\t */\n\t\tUnSyncedWin:number;\n\t\t/**\n\t\t * 断线标记, 1: 已断线\n\t\t */\n\t\tQuitFlag:number;\n\t\t/**\n\t\t * 用户地址\n\t\t */\n\t\tAddr:string;\n\t\t/**\n\t\t * 防超时开关\n\t\t */\n\t\tAntiTimeout:boolean;\n\t\t/**\n\t\t * 用户渠道\n\t\t */\n\t\tChannel:string;\n\t}\n\n\t/**\n\t * 游戏状态，id:102，当进入房间或游戏开始倒计时(prepare)会一次性发送给客户端\n\t */\n\texport interface RummyRoomSTModel {\n\t\t/**\n\t\t * 当前时间戳\n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * 房间类型\n\t\t */\n\t\tKind:number;\n\t\t/**\n\t\t * 房间ID\n\t\t */\n\t\tID:number;\n\t\t/**\n\t\t * 游戏阶段\n\t\t */\n\t\tStage:RummySTAGEModel;\n\t\t/**\n\t\t * 记录座位的实时玩家信息, key是座位号，value是玩家信息\n\t\t */\n\t\tUserS:{[key: number]: RummyUserSTModel; };\n\t\t/**\n\t\t * \n\t\t */\n\t\tTableCard:RummyTableCardModel;\n\t\t/**\n\t\t * 当前轮的座位号\n\t\t */\n\t\tActiveChair:number;\n\t\t/**\n\t\t * 到下一玩家的时间戳, 0表示不存在倒计时\n\t\t */\n\t\tNextTS:number;\n\t\t/**\n\t\t * 上一轮的座位号\n\t\t */\n\t\tLastChair:number;\n\t\t/**\n\t\t * 庄家座位号, 0表示没有庄家\n\t\t */\n\t\tBankerChair:number;\n\t\t/**\n\t\t * 结算信息\n\t\t */\n\t\tSettle:RummySettleModel;\n\t}\n\n\t/**\n\t * 用户进入房间，id：103\n\t */\n\texport interface RummyUserInEVModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * \n\t\t */\n\t\tUser:RummyUserSTModel;\n\t}\n\n\t/**\n\t * 用户退出房间(用户主动退出/被踢出房间)，id：104\n\t */\n\texport interface RummyUserOutEVModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * \n\t\t */\n\t\tChairNo:number;\n\t}\n\n\t/**\n\t * 广播游戏准备, id: 105\n\t */\n\texport interface RummyPrepareNTModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * 游戏开始的时间戳, 用于客户端准备倒计时\n\t\t */\n\t\tNextTS:number;\n\t}\n\n\t/**\n\t * 广播游戏准备取消, id: 106\n\t */\n\texport interface RummyPrepareCancelNTModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t}\n\n\t/**\n\t * 广播通知用户play，id：107\n\t */\n\texport interface RummyPlayNTModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * \n\t\t */\n\t\tChair:number;\n\t\t/**\n\t\t * 用户如果drop, 需要扣除多少\n\t\t */\n\t\tDropAmount:number;\n\t\t/**\n\t\t * 结束时间戳，用于客户端提醒用户叫牌倒计时\n\t\t */\n\t\tNextTS:number;\n\t}\n\n\t/**\n\t * 广播通知用户Declare，id：108\n\t */\n\texport interface RummyDeclareNTModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * 结算原因, 0:未结算  1:胡牌结算  2:流局结算  3:玩家弃牌,人数不足结算\n\t\t */\n\t\tReason:number;\n\t\t/**\n\t\t * 结束时间戳，用于客户端提醒用户叫牌倒计时\n\t\t */\n\t\tNextTS:number;\n\n\t\t/**\n\t\t * 赢家座位号\n\t\t */\n\t\tChair:number;\n\t}\n\n\t/**\n\t * 广播用户弃牌，id: 109\n\t */\n\texport interface RummyDropEVModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * 弃牌玩家\n\t\t */\n\t\tChair:number;\n\t\t/**\n\t\t * 弃牌扣除的钱\n\t\t */\n\t\tDropAmount:number;\n\n\t\t/**\n\t\t * 是否是超时弃牌\n\t\t */\n\t    TimeOut:boolean;\n\n\t}\n\n\t/**\n\t * 广播用户摸牌反馈，id: 110\n\t */\n\texport interface RummyTouchEVModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * chair id\n\t\t */\n\t\tChair:number;\n\t\t/**\n\t\t * 是否从可见牌池摸牌\n\t\t */\n\t\tVisible:boolean;\n\t\t/**\n\t\t * 摸的什么牌\n\t\t */\n\t\tCardTouch:number;\n\t\t/**\n\t\t * 桌牌信息\n\t\t */\n\t\tTableCard:RummyTableCardModel;\n\t\t/**\n\t\t * 手牌信息, 仅自己可见\n\t\t */\n\t\tHandCard:RummyHandCardModel;\n\t}\n\n\t/**\n\t * 广播用户出牌反馈，id: 111\n\t */\n\texport interface RummyDiscardEVModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * chair id\n\t\t */\n\t\tChair:number;\n\t\t/**\n\t\t * 出的牌的组索引\n\t\t */\n\t\tGroupIndex:number;\n\t\t/**\n\t\t * 出的牌在该组的索引\n\t\t */\n\t\tCardIndex:number;\n\t\t/**\n\t\t * 用户出牌的牌值\n\t\t */\n\t\tCard:number;\n\t\t/**\n\t\t * 桌牌信息\n\t\t */\n\t\tTableCard:RummyTableCardModel;\n\t\t/**\n\t\t * 手牌信息, 仅自己可见\n\t\t */\n\t\tHandCard:RummyHandCardModel;\n\n\t\t/**\n\t\t * 是否是胡牌出牌\n\t\t */\n\t\tIsDeclare:boolean\n\n\t\t/**\n\t\t * 结束时间戳，用于客户端提醒用户叫牌倒计时\n\t\t */\n\t\tNextTS:number;\n\t}\n\n\t/**\n\t * 通知用户理牌反馈，不用广播, id: 112\n\t */\n\texport interface RummyGroupEVModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * 手牌信息, 仅自己可见\n\t\t */\n\t\tHandCard:RummyHandCardModel;\n\t\t/**\n\t\t * 弃牌扣除的钱\n\t\t */\n\t\tDropAmount:number;\n\t}\n\n\t/**\n\t * 通知用户胡牌，id: 114\n\t */\n\texport interface RummyDeclareEVModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * 赢家\n\t\t */\n\t\tWinChair:number;\n\t\t/**\n\t\t * declare玩家\n\t\t */\n\t\tChair:number;\n\t\t/**\n\t\t * 胡牌时所出牌的牌值,所有人可见, -1表示不需要出牌,可以直接胡\n\t\t */\n\t\tCard:number;\n\t\t/**\n\t\t * declare 玩家的手牌信息\n\t\t */\n\t\tHandCard:RummyHandCardModel;\n\t}\n\n\t/**\n\t * 广播结算结果，id:115\n\t */\n\texport interface RummySettleSTModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * 结算信息\n\t\t */\n\t\tSettle:RummySettleModel;\n\t}\n\n\t/**\n\t * 上局结算信息反馈，id: 116\n\t */\n\texport interface RummyLastSettleEVModel {\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\t\t/**\n\t\t * 结算信息\n\t\t */\n\t\tSettle:RummySettleModel;\n\t}\n\n\t/**\n\t *  通知重新洗牌,  id: 117\n\t */\n\texport interface RummyShuffleEVModel{\n\t\t/**\n\t\t * \n\t\t */\n\t\tTimestamp:number;\n\n\t\t/**\n\t\t * 暗牌牌池剩余牌数量\n\t\t */\n\t\tPoolCnt:number;\n\n\t}\n\n}\n"}